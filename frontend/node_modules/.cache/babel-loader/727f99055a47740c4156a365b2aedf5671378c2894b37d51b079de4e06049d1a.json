{"ast":null,"code":"var _jsxFileName = \"E:\\\\Proyectos\\\\despacho-prueba\\\\frontend\\\\src\\\\pages\\\\CreateExpedientePage.js\",\n  _s = $RefreshSig$();\nimport React, { useState } from 'react';\nimport { Box, Typography, Paper, TextField, Button, Grid, Card, CardContent, Alert, LinearProgress } from '@mui/material';\nimport { Save as SaveIcon, CloudUpload as CloudUploadIcon, Description as DescriptionIcon } from '@mui/icons-material';\nimport { useNavigate } from 'react-router-dom';\nimport { useForm } from 'react-hook-form';\nimport { yupResolver } from '@hookform/resolvers/yup';\nimport * as yup from 'yup';\nimport { toast } from 'react-toastify';\nimport { useDropzone } from 'react-dropzone';\nimport { expedienteService } from '../services/expedienteService';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst schema = yup.object({\n  nombre_solicitante: yup.string().required('El nombre del solicitante es requerido').min(2, 'El nombre debe tener al menos 2 caracteres').max(255, 'El nombre no puede exceder 255 caracteres'),\n  dni: yup.string().required('El DNI es requerido').min(8, 'El DNI debe tener al menos 8 caracteres').max(20, 'El DNI no puede exceder 20 caracteres'),\n  area: yup.string().required('El área es requerida').min(2, 'El área debe tener al menos 2 caracteres').max(100, 'El área no puede exceder 100 caracteres'),\n  descripcion: yup.string().max(1000, 'La descripción no puede exceder 1000 caracteres'),\n  numero_expediente: yup.string().min(4, 'El número de expediente debe tener al menos 4 caracteres').max(50, 'El número de expediente no puede exceder 50 caracteres'),\n  tipo_expediente: yup.boolean().required('El tipo es requerido')\n});\nconst CreateExpedientePage = () => {\n  _s();\n  var _errors$nombre_solici, _errors$dni, _errors$area, _errors$numero_expedi, _errors$descripcion;\n  const navigate = useNavigate();\n  const [loading, setLoading] = useState(false);\n  const [uploadedFile, setUploadedFile] = useState(null);\n  const {\n    register,\n    handleSubmit,\n    formState: {\n      errors\n    },\n    reset\n  } = useForm({\n    resolver: yupResolver(schema)\n  });\n  const onDrop = acceptedFiles => {\n    if (acceptedFiles.length > 0) {\n      const file = acceptedFiles[0];\n      setUploadedFile(file);\n      toast.success(`Archivo \"${file.name}\" seleccionado correctamente`);\n    }\n  };\n  const {\n    getRootProps,\n    getInputProps,\n    isDragActive\n  } = useDropzone({\n    onDrop,\n    accept: {\n      'application/pdf': ['.pdf'],\n      'image/*': ['.png', '.jpg', '.jpeg', '.gif']\n    },\n    maxFiles: 1,\n    maxSize: 10485760,\n    // 10MB\n    onDropRejected: rejectedFiles => {\n      const error = rejectedFiles[0].errors[0];\n      if (error.code === 'file-too-large') {\n        toast.error('El archivo es demasiado grande. Máximo 10MB.');\n      } else if (error.code === 'file-invalid-type') {\n        toast.error('Tipo de archivo no válido. Solo se permiten PDF e imágenes.');\n      } else {\n        toast.error('Error al subir el archivo.');\n      }\n    }\n  });\n  const onSubmit = async data => {\n    try {\n      setLoading(true);\n\n      // Create FormData for file upload\n      const formData = new FormData();\n      formData.append('nombre_solicitante', data.nombre_solicitante);\n      formData.append('dni', data.dni);\n      formData.append('area', data.area);\n      if (data.descripcion) {\n        formData.append('descripcion', data.descripcion);\n      }\n      if (data.numero_expediente) {\n        formData.append('numero_expediente', data.numero_expediente);\n      }\n      if (uploadedFile) {\n        formData.append('archivo_escaneado', uploadedFile);\n      }\n      const response = await expedienteService.createExpediente(formData);\n      const expedienteId = response.data.expediente.id;\n      toast.success('¡Expediente creado exitosamente!');\n\n      // Automatically download and open the receipt for printing\n      try {\n        const comprobanteResponse = await expedienteService.downloadComprobante(expedienteId);\n\n        // Create blob URL for the PDF\n        const blob = new Blob([comprobanteResponse.data], {\n          type: 'application/pdf'\n        });\n        const url = window.URL.createObjectURL(blob);\n\n        // Open PDF in new window for printing\n        const printWindow = window.open(url, '_blank');\n        if (printWindow) {\n          // Wait for the PDF to load and then trigger print dialog\n          printWindow.onload = () => {\n            setTimeout(() => {\n              printWindow.print();\n            }, 1000);\n          };\n          toast.success('Comprobante generado. Se abrirá automáticamente para imprimir.');\n        } else {\n          // Fallback: download the file if popup is blocked\n          const link = document.createElement('a');\n          link.href = url;\n          link.download = `comprobante-${response.data.expediente.numero_expediente}.pdf`;\n          document.body.appendChild(link);\n          link.click();\n          document.body.removeChild(link);\n          toast.info('Comprobante descargado. Ábralo para imprimir.');\n        }\n\n        // Clean up the blob URL after a delay\n        setTimeout(() => {\n          window.URL.revokeObjectURL(url);\n        }, 10000);\n      } catch (comprobanteError) {\n        console.error('Error downloading comprobante:', comprobanteError);\n        toast.warning('Expediente creado, pero hubo un problema al generar el comprobante. Puede descargarlo desde la página de detalles.');\n      }\n      navigate(`/expedientes/${expedienteId}`);\n    } catch (error) {\n      console.error('Error creating expediente:', error);\n      toast.error('Error al crear el expediente');\n    } finally {\n      setLoading(false);\n    }\n  };\n  const removeFile = () => {\n    setUploadedFile(null);\n    toast.info('Archivo removido');\n  };\n  const formatFileSize = bytes => {\n    if (bytes === 0) return '0 Bytes';\n    const k = 1024;\n    const sizes = ['Bytes', 'KB', 'MB'];\n    const i = Math.floor(Math.log(bytes) / Math.log(k));\n    return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];\n  };\n  return /*#__PURE__*/_jsxDEV(Box, {\n    children: [/*#__PURE__*/_jsxDEV(Box, {\n      sx: {\n        mb: 3\n      },\n      children: [/*#__PURE__*/_jsxDEV(Typography, {\n        variant: \"h4\",\n        gutterBottom: true,\n        children: \"Nuevo Expediente\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 189,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Typography, {\n        variant: \"body1\",\n        color: \"text.secondary\",\n        children: \"Complete los datos del expediente. Los campos marcados con * son obligatorios.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 192,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 188,\n      columnNumber: 7\n    }, this), loading && /*#__PURE__*/_jsxDEV(LinearProgress, {\n      sx: {\n        mb: 2\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 197,\n      columnNumber: 19\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: handleSubmit(onSubmit),\n      children: /*#__PURE__*/_jsxDEV(Grid, {\n        container: true,\n        spacing: 3,\n        children: [/*#__PURE__*/_jsxDEV(Grid, {\n          item: true,\n          xs: 12,\n          children: /*#__PURE__*/_jsxDEV(Paper, {\n            sx: {\n              p: 3\n            },\n            children: [/*#__PURE__*/_jsxDEV(Typography, {\n              variant: \"h6\",\n              gutterBottom: true,\n              children: \"Datos del Solicitante\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 204,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Grid, {\n              container: true,\n              spacing: 2,\n              children: [/*#__PURE__*/_jsxDEV(Grid, {\n                item: true,\n                xs: 12,\n                md: 6,\n                children: /*#__PURE__*/_jsxDEV(TextField, {\n                  fullWidth: true,\n                  label: \"Nombre del Solicitante *\",\n                  ...register('nombre_solicitante'),\n                  error: !!errors.nombre_solicitante,\n                  helperText: (_errors$nombre_solici = errors.nombre_solicitante) === null || _errors$nombre_solici === void 0 ? void 0 : _errors$nombre_solici.message,\n                  disabled: loading\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 209,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 208,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(Grid, {\n                item: true,\n                xs: 12,\n                md: 6,\n                children: /*#__PURE__*/_jsxDEV(TextField, {\n                  fullWidth: true,\n                  label: \"DNI *\",\n                  ...register('dni'),\n                  error: !!errors.dni,\n                  helperText: (_errors$dni = errors.dni) === null || _errors$dni === void 0 ? void 0 : _errors$dni.message,\n                  disabled: loading\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 219,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 218,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 207,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 203,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 202,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Grid, {\n          item: true,\n          xs: 12,\n          children: /*#__PURE__*/_jsxDEV(Paper, {\n            sx: {\n              p: 3\n            },\n            children: [/*#__PURE__*/_jsxDEV(Typography, {\n              variant: \"h6\",\n              gutterBottom: true,\n              children: \"Datos del Expediente\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 235,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Grid, {\n              container: true,\n              spacing: 2,\n              children: [/*#__PURE__*/_jsxDEV(Grid, {\n                item: true,\n                xs: 12,\n                md: 6,\n                children: /*#__PURE__*/_jsxDEV(TextField, {\n                  fullWidth: true,\n                  label: \"\\xC1rea *\",\n                  ...register('area'),\n                  error: !!errors.area,\n                  helperText: (_errors$area = errors.area) === null || _errors$area === void 0 ? void 0 : _errors$area.message,\n                  disabled: loading\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 240,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 239,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(Grid, {\n                item: true,\n                xs: 12,\n                md: 6,\n                children: /*#__PURE__*/_jsxDEV(TextField, {\n                  fullWidth: true,\n                  label: \"N\\xFAmero de Expediente\",\n                  ...register('numero_expediente'),\n                  error: !!errors.numero_expediente,\n                  helperText: ((_errors$numero_expedi = errors.numero_expediente) === null || _errors$numero_expedi === void 0 ? void 0 : _errors$numero_expedi.message) || 'Si no se especifica, se generará automáticamente',\n                  disabled: loading\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 250,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 249,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(Grid, {\n                item: true,\n                xs: 12,\n                children: /*#__PURE__*/_jsxDEV(TextField, {\n                  fullWidth: true,\n                  multiline: true,\n                  rows: 4,\n                  label: \"Descripci\\xF3n\",\n                  ...register('descripcion'),\n                  error: !!errors.descripcion,\n                  helperText: (_errors$descripcion = errors.descripcion) === null || _errors$descripcion === void 0 ? void 0 : _errors$descripcion.message,\n                  disabled: loading\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 260,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 259,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 238,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 234,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 233,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Grid, {\n          item: true,\n          xs: 12,\n          children: /*#__PURE__*/_jsxDEV(Paper, {\n            sx: {\n              p: 3\n            },\n            children: [/*#__PURE__*/_jsxDEV(Typography, {\n              variant: \"h6\",\n              gutterBottom: true,\n              children: \"Archivo Escaneado (Opcional)\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 278,\n              columnNumber: 15\n            }, this), !uploadedFile ? /*#__PURE__*/_jsxDEV(Card, {\n              ...getRootProps(),\n              sx: {\n                border: 2,\n                borderStyle: 'dashed',\n                borderColor: isDragActive ? 'primary.main' : 'grey.300',\n                backgroundColor: isDragActive ? 'primary.light' : 'grey.50',\n                cursor: 'pointer',\n                p: 4,\n                textAlign: 'center',\n                transition: 'all 0.3s ease',\n                '&:hover': {\n                  borderColor: 'primary.main',\n                  backgroundColor: 'primary.light'\n                }\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                ...getInputProps()\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 300,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(CloudUploadIcon, {\n                sx: {\n                  fontSize: 48,\n                  color: 'primary.main',\n                  mb: 2\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 301,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(Typography, {\n                variant: \"h6\",\n                gutterBottom: true,\n                children: isDragActive ? 'Suelte el archivo aquí...' : 'Arrastre un archivo aquí o haga clic para seleccionar'\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 308,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(Typography, {\n                variant: \"body2\",\n                color: \"text.secondary\",\n                children: \"Se permiten archivos PDF e im\\xE1genes (PNG, JPG, JPEG, GIF)\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 313,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(Typography, {\n                variant: \"caption\",\n                color: \"text.secondary\",\n                children: \"Tama\\xF1o m\\xE1ximo: 10MB\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 316,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 283,\n              columnNumber: 17\n            }, this) : /*#__PURE__*/_jsxDEV(Card, {\n              sx: {\n                p: 2\n              },\n              children: /*#__PURE__*/_jsxDEV(Box, {\n                sx: {\n                  display: 'flex',\n                  alignItems: 'center',\n                  gap: 2\n                },\n                children: [/*#__PURE__*/_jsxDEV(DescriptionIcon, {\n                  color: \"primary\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 323,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(Box, {\n                  sx: {\n                    flexGrow: 1\n                  },\n                  children: [/*#__PURE__*/_jsxDEV(Typography, {\n                    variant: \"body1\",\n                    fontWeight: \"bold\",\n                    children: uploadedFile.name\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 325,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(Typography, {\n                    variant: \"body2\",\n                    color: \"text.secondary\",\n                    children: formatFileSize(uploadedFile.size)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 328,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 324,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(Button, {\n                  variant: \"outlined\",\n                  color: \"error\",\n                  size: \"small\",\n                  onClick: removeFile,\n                  disabled: loading,\n                  children: \"Remover\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 332,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 322,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 321,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 277,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 276,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Grid, {\n          item: true,\n          xs: 12,\n          children: /*#__PURE__*/_jsxDEV(Box, {\n            sx: {\n              display: 'flex',\n              gap: 2,\n              justifyContent: 'flex-end'\n            },\n            children: [/*#__PURE__*/_jsxDEV(Button, {\n              variant: \"outlined\",\n              onClick: () => navigate('/expedientes'),\n              disabled: loading,\n              children: \"Cancelar\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 350,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Button, {\n              type: \"submit\",\n              variant: \"contained\",\n              startIcon: /*#__PURE__*/_jsxDEV(SaveIcon, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 360,\n                columnNumber: 28\n              }, this),\n              disabled: loading,\n              children: loading ? 'Creando...' : 'Crear Expediente'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 357,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 349,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 348,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 200,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 199,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Alert, {\n      severity: \"info\",\n      sx: {\n        mt: 3\n      },\n      children: /*#__PURE__*/_jsxDEV(Typography, {\n        variant: \"body2\",\n        children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n          children: \"Informaci\\xF3n:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 373,\n          columnNumber: 11\n        }, this), \" Al crear el expediente se generar\\xE1 autom\\xE1ticamente un comprobante en PDF mejorado que se abrir\\xE1 directamente para imprimir. Tambi\\xE9n podr\\xE1 descargarlo posteriormente desde la p\\xE1gina de detalles del expediente.\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 372,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 371,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 187,\n    columnNumber: 5\n  }, this);\n};\n_s(CreateExpedientePage, \"D4W1IdUOE6JViGWQ5mQhn1DAw1s=\", false, function () {\n  return [useNavigate, useForm, useDropzone];\n});\n_c = CreateExpedientePage;\nexport default CreateExpedientePage;\nvar _c;\n$RefreshReg$(_c, \"CreateExpedientePage\");","map":{"version":3,"names":["React","useState","Box","Typography","Paper","TextField","Button","Grid","Card","CardContent","Alert","LinearProgress","Save","SaveIcon","CloudUpload","CloudUploadIcon","Description","DescriptionIcon","useNavigate","useForm","yupResolver","yup","toast","useDropzone","expedienteService","jsxDEV","_jsxDEV","schema","object","nombre_solicitante","string","required","min","max","dni","area","descripcion","numero_expediente","tipo_expediente","boolean","CreateExpedientePage","_s","_errors$nombre_solici","_errors$dni","_errors$area","_errors$numero_expedi","_errors$descripcion","navigate","loading","setLoading","uploadedFile","setUploadedFile","register","handleSubmit","formState","errors","reset","resolver","onDrop","acceptedFiles","length","file","success","name","getRootProps","getInputProps","isDragActive","accept","maxFiles","maxSize","onDropRejected","rejectedFiles","error","code","onSubmit","data","formData","FormData","append","response","createExpediente","expedienteId","expediente","id","comprobanteResponse","downloadComprobante","blob","Blob","type","url","window","URL","createObjectURL","printWindow","open","onload","setTimeout","print","link","document","createElement","href","download","body","appendChild","click","removeChild","info","revokeObjectURL","comprobanteError","console","warning","removeFile","formatFileSize","bytes","k","sizes","i","Math","floor","log","parseFloat","pow","toFixed","children","sx","mb","variant","gutterBottom","fileName","_jsxFileName","lineNumber","columnNumber","color","container","spacing","item","xs","p","md","fullWidth","label","helperText","message","disabled","multiline","rows","border","borderStyle","borderColor","backgroundColor","cursor","textAlign","transition","fontSize","display","alignItems","gap","flexGrow","fontWeight","size","onClick","justifyContent","startIcon","severity","mt","_c","$RefreshReg$"],"sources":["E:/Proyectos/despacho-prueba/frontend/src/pages/CreateExpedientePage.js"],"sourcesContent":["import React, { useState } from 'react';\r\nimport {\r\n  Box,\r\n  Typography,\r\n  Paper,\r\n  TextField,\r\n  Button,\r\n  Grid,\r\n  Card,\r\n  CardContent,\r\n  Alert,\r\n  LinearProgress,\r\n} from '@mui/material';\r\nimport {\r\n  Save as SaveIcon,\r\n  CloudUpload as CloudUploadIcon,\r\n  Description as DescriptionIcon,\r\n} from '@mui/icons-material';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { useForm } from 'react-hook-form';\r\nimport { yupResolver } from '@hookform/resolvers/yup';\r\nimport * as yup from 'yup';\r\nimport { toast } from 'react-toastify';\r\nimport { useDropzone } from 'react-dropzone';\r\n\r\nimport { expedienteService } from '../services/expedienteService';\r\n\r\nconst schema = yup.object({\r\n  nombre_solicitante: yup\r\n    .string()\r\n    .required('El nombre del solicitante es requerido')\r\n    .min(2, 'El nombre debe tener al menos 2 caracteres')\r\n    .max(255, 'El nombre no puede exceder 255 caracteres'),\r\n  dni: yup\r\n    .string()\r\n    .required('El DNI es requerido')\r\n    .min(8, 'El DNI debe tener al menos 8 caracteres')\r\n    .max(20, 'El DNI no puede exceder 20 caracteres'),\r\n  area: yup\r\n    .string()\r\n    .required('El área es requerida')\r\n    .min(2, 'El área debe tener al menos 2 caracteres')\r\n    .max(100, 'El área no puede exceder 100 caracteres'),\r\n  descripcion: yup\r\n    .string()\r\n    .max(1000, 'La descripción no puede exceder 1000 caracteres'),\r\n  numero_expediente: yup\r\n    .string()\r\n    .min(4, 'El número de expediente debe tener al menos 4 caracteres')\r\n    .max(50, 'El número de expediente no puede exceder 50 caracteres'),\r\n  tipo_expediente: yup\r\n    .boolean()\r\n    .required('El tipo es requerido'),\r\n});\r\n\r\nconst CreateExpedientePage = () => {\r\n  const navigate = useNavigate();\r\n  const [loading, setLoading] = useState(false);\r\n  const [uploadedFile, setUploadedFile] = useState(null);\r\n\r\n  const {\r\n    register,\r\n    handleSubmit,\r\n    formState: { errors },\r\n    reset,\r\n  } = useForm({\r\n    resolver: yupResolver(schema),\r\n  });\r\n\r\n  const onDrop = (acceptedFiles) => {\r\n    if (acceptedFiles.length > 0) {\r\n      const file = acceptedFiles[0];\r\n      setUploadedFile(file);\r\n      toast.success(`Archivo \"${file.name}\" seleccionado correctamente`);\r\n    }\r\n  };\r\n\r\n  const { getRootProps, getInputProps, isDragActive } = useDropzone({\r\n    onDrop,\r\n    accept: {\r\n      'application/pdf': ['.pdf'],\r\n      'image/*': ['.png', '.jpg', '.jpeg', '.gif'],\r\n    },\r\n    maxFiles: 1,\r\n    maxSize: 10485760, // 10MB\r\n    onDropRejected: (rejectedFiles) => {\r\n      const error = rejectedFiles[0].errors[0];\r\n      if (error.code === 'file-too-large') {\r\n        toast.error('El archivo es demasiado grande. Máximo 10MB.');\r\n      } else if (error.code === 'file-invalid-type') {\r\n        toast.error('Tipo de archivo no válido. Solo se permiten PDF e imágenes.');\r\n      } else {\r\n        toast.error('Error al subir el archivo.');\r\n      }\r\n    },\r\n  });\r\n\r\n  const onSubmit = async (data) => {\r\n    try {\r\n      setLoading(true);\r\n\r\n      // Create FormData for file upload\r\n      const formData = new FormData();\r\n      formData.append('nombre_solicitante', data.nombre_solicitante);\r\n      formData.append('dni', data.dni);\r\n      formData.append('area', data.area);\r\n      if (data.descripcion) {\r\n        formData.append('descripcion', data.descripcion);\r\n      }\r\n      if (data.numero_expediente) {\r\n        formData.append('numero_expediente', data.numero_expediente);\r\n      }\r\n      if (uploadedFile) {\r\n        formData.append('archivo_escaneado', uploadedFile);\r\n      }\r\n\r\n      const response = await expedienteService.createExpediente(formData);\r\n      const expedienteId = response.data.expediente.id;\r\n      \r\n      toast.success('¡Expediente creado exitosamente!');\r\n\r\n      // Automatically download and open the receipt for printing\r\n      try {\r\n        const comprobanteResponse = await expedienteService.downloadComprobante(expedienteId);\r\n        \r\n        // Create blob URL for the PDF\r\n        const blob = new Blob([comprobanteResponse.data], { type: 'application/pdf' });\r\n        const url = window.URL.createObjectURL(blob);\r\n        \r\n        // Open PDF in new window for printing\r\n        const printWindow = window.open(url, '_blank');\r\n        \r\n        if (printWindow) {\r\n          // Wait for the PDF to load and then trigger print dialog\r\n          printWindow.onload = () => {\r\n            setTimeout(() => {\r\n              printWindow.print();\r\n            }, 1000);\r\n          };\r\n          \r\n          toast.success('Comprobante generado. Se abrirá automáticamente para imprimir.');\r\n        } else {\r\n          // Fallback: download the file if popup is blocked\r\n          const link = document.createElement('a');\r\n          link.href = url;\r\n          link.download = `comprobante-${response.data.expediente.numero_expediente}.pdf`;\r\n          document.body.appendChild(link);\r\n          link.click();\r\n          document.body.removeChild(link);\r\n          \r\n          toast.info('Comprobante descargado. Ábralo para imprimir.');\r\n        }\r\n        \r\n        // Clean up the blob URL after a delay\r\n        setTimeout(() => {\r\n          window.URL.revokeObjectURL(url);\r\n        }, 10000);\r\n        \r\n      } catch (comprobanteError) {\r\n        console.error('Error downloading comprobante:', comprobanteError);\r\n        toast.warning('Expediente creado, pero hubo un problema al generar el comprobante. Puede descargarlo desde la página de detalles.');\r\n      }\r\n\r\n      navigate(`/expedientes/${expedienteId}`);\r\n    } catch (error) {\r\n      console.error('Error creating expediente:', error);\r\n      toast.error('Error al crear el expediente');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const removeFile = () => {\r\n    setUploadedFile(null);\r\n    toast.info('Archivo removido');\r\n  };\r\n\r\n  const formatFileSize = (bytes) => {\r\n    if (bytes === 0) return '0 Bytes';\r\n    const k = 1024;\r\n    const sizes = ['Bytes', 'KB', 'MB'];\r\n    const i = Math.floor(Math.log(bytes) / Math.log(k));\r\n    return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];\r\n  };\r\n\r\n  return (\r\n    <Box>\r\n      <Box sx={{ mb: 3 }}>\r\n        <Typography variant=\"h4\" gutterBottom>\r\n          Nuevo Expediente\r\n        </Typography>\r\n        <Typography variant=\"body1\" color=\"text.secondary\">\r\n          Complete los datos del expediente. Los campos marcados con * son obligatorios.\r\n        </Typography>\r\n      </Box>\r\n\r\n      {loading && <LinearProgress sx={{ mb: 2 }} />}\r\n\r\n      <form onSubmit={handleSubmit(onSubmit)}>\r\n        <Grid container spacing={3}>\r\n          {/* Datos del Solicitante */}\r\n          <Grid item xs={12}>\r\n            <Paper sx={{ p: 3 }}>\r\n              <Typography variant=\"h6\" gutterBottom>\r\n                Datos del Solicitante\r\n              </Typography>\r\n              <Grid container spacing={2}>\r\n                <Grid item xs={12} md={6}>\r\n                  <TextField\r\n                    fullWidth\r\n                    label=\"Nombre del Solicitante *\"\r\n                    {...register('nombre_solicitante')}\r\n                    error={!!errors.nombre_solicitante}\r\n                    helperText={errors.nombre_solicitante?.message}\r\n                    disabled={loading}\r\n                  />\r\n                </Grid>\r\n                <Grid item xs={12} md={6}>\r\n                  <TextField\r\n                    fullWidth\r\n                    label=\"DNI *\"\r\n                    {...register('dni')}\r\n                    error={!!errors.dni}\r\n                    helperText={errors.dni?.message}\r\n                    disabled={loading}\r\n                  />\r\n                </Grid>\r\n              </Grid>\r\n            </Paper>\r\n          </Grid>\r\n\r\n          {/* Datos del Expediente */}\r\n          <Grid item xs={12}>\r\n            <Paper sx={{ p: 3 }}>\r\n              <Typography variant=\"h6\" gutterBottom>\r\n                Datos del Expediente\r\n              </Typography>\r\n              <Grid container spacing={2}>\r\n                <Grid item xs={12} md={6}>\r\n                  <TextField\r\n                    fullWidth\r\n                    label=\"Área *\"\r\n                    {...register('area')}\r\n                    error={!!errors.area}\r\n                    helperText={errors.area?.message}\r\n                    disabled={loading}\r\n                  />\r\n                </Grid>\r\n                <Grid item xs={12} md={6}>\r\n                  <TextField\r\n                    fullWidth\r\n                    label=\"Número de Expediente\"\r\n                    {...register('numero_expediente')}\r\n                    error={!!errors.numero_expediente}\r\n                    helperText={errors.numero_expediente?.message || 'Si no se especifica, se generará automáticamente'}\r\n                    disabled={loading}\r\n                  />\r\n                </Grid>\r\n                <Grid item xs={12}>\r\n                  <TextField\r\n                    fullWidth\r\n                    multiline\r\n                    rows={4}\r\n                    label=\"Descripción\"\r\n                    {...register('descripcion')}\r\n                    error={!!errors.descripcion}\r\n                    helperText={errors.descripcion?.message}\r\n                    disabled={loading}\r\n                  />\r\n                </Grid>\r\n              </Grid>\r\n            </Paper>\r\n          </Grid>\r\n\r\n          {/* Archivo Escaneado */}\r\n          <Grid item xs={12}>\r\n            <Paper sx={{ p: 3 }}>\r\n              <Typography variant=\"h6\" gutterBottom>\r\n                Archivo Escaneado (Opcional)\r\n              </Typography>\r\n              \r\n              {!uploadedFile ? (\r\n                <Card\r\n                  {...getRootProps()}\r\n                  sx={{\r\n                    border: 2,\r\n                    borderStyle: 'dashed',\r\n                    borderColor: isDragActive ? 'primary.main' : 'grey.300',\r\n                    backgroundColor: isDragActive ? 'primary.light' : 'grey.50',\r\n                    cursor: 'pointer',\r\n                    p: 4,\r\n                    textAlign: 'center',\r\n                    transition: 'all 0.3s ease',\r\n                    '&:hover': {\r\n                      borderColor: 'primary.main',\r\n                      backgroundColor: 'primary.light',\r\n                    },\r\n                  }}\r\n                >\r\n                  <input {...getInputProps()} />\r\n                  <CloudUploadIcon\r\n                    sx={{\r\n                      fontSize: 48,\r\n                      color: 'primary.main',\r\n                      mb: 2,\r\n                    }}\r\n                  />\r\n                  <Typography variant=\"h6\" gutterBottom>\r\n                    {isDragActive\r\n                      ? 'Suelte el archivo aquí...'\r\n                      : 'Arrastre un archivo aquí o haga clic para seleccionar'}\r\n                  </Typography>\r\n                  <Typography variant=\"body2\" color=\"text.secondary\">\r\n                    Se permiten archivos PDF e imágenes (PNG, JPG, JPEG, GIF)\r\n                  </Typography>\r\n                  <Typography variant=\"caption\" color=\"text.secondary\">\r\n                    Tamaño máximo: 10MB\r\n                  </Typography>\r\n                </Card>\r\n              ) : (\r\n                <Card sx={{ p: 2 }}>\r\n                  <Box sx={{ display: 'flex', alignItems: 'center', gap: 2 }}>\r\n                    <DescriptionIcon color=\"primary\" />\r\n                    <Box sx={{ flexGrow: 1 }}>\r\n                      <Typography variant=\"body1\" fontWeight=\"bold\">\r\n                        {uploadedFile.name}\r\n                      </Typography>\r\n                      <Typography variant=\"body2\" color=\"text.secondary\">\r\n                        {formatFileSize(uploadedFile.size)}\r\n                      </Typography>\r\n                    </Box>\r\n                    <Button\r\n                      variant=\"outlined\"\r\n                      color=\"error\"\r\n                      size=\"small\"\r\n                      onClick={removeFile}\r\n                      disabled={loading}\r\n                    >\r\n                      Remover\r\n                    </Button>\r\n                  </Box>\r\n                </Card>\r\n              )}\r\n            </Paper>\r\n          </Grid>\r\n\r\n          {/* Actions */}\r\n          <Grid item xs={12}>\r\n            <Box sx={{ display: 'flex', gap: 2, justifyContent: 'flex-end' }}>\r\n              <Button\r\n                variant=\"outlined\"\r\n                onClick={() => navigate('/expedientes')}\r\n                disabled={loading}\r\n              >\r\n                Cancelar\r\n              </Button>\r\n              <Button\r\n                type=\"submit\"\r\n                variant=\"contained\"\r\n                startIcon={<SaveIcon />}\r\n                disabled={loading}\r\n              >\r\n                {loading ? 'Creando...' : 'Crear Expediente'}\r\n              </Button>\r\n            </Box>\r\n          </Grid>\r\n        </Grid>\r\n      </form>\r\n\r\n      {/* Info Alert */}\r\n      <Alert severity=\"info\" sx={{ mt: 3 }}>\r\n        <Typography variant=\"body2\">\r\n          <strong>Información:</strong> Al crear el expediente se generará automáticamente un \r\n          comprobante en PDF mejorado que se abrirá directamente para imprimir. También podrá \r\n          descargarlo posteriormente desde la página de detalles del expediente.\r\n        </Typography>\r\n      </Alert>\r\n    </Box>\r\n  );\r\n};\r\n\r\nexport default CreateExpedientePage;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}